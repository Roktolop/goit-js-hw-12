{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["`use strict`;\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captions: true,\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\n//murkup create\n\nexport function createGallery(images) {\n    const markup = images\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n          <ul class=\"photo-list\">\n            <li class=\"photo-item\">\n              <p class=\"text\">Likes <span class=\"photo-item-span\">${likes}</span></p>\n            </li>\n            <li class=\"photo-item\">\n              <p class=\"text\">Views <span class=\"photo-item-span\">${views}</span></p>\n            </li>\n            <li class=\"photo-item\">\n              <p class=\"text\">Comments <span class=\"photo-item-span\">${comments}</span></p>\n            </li>\n            <li class=\"photo-item\">\n              <p class=\"text\">Downloads <span class=\"photo-item-span\">${downloads}</span></p>\n            </li>\n          </ul>\n        </a>\n      `\n        )\n        .join(\"\");\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\n//clear gallery\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\n//hide or show loader class\n\nexport function showLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('is-visible');\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('is-visible');\n}\n\nexport function showLoadMore() {\n  const btnLoadMore = document.querySelector('.loadMore');\n  btnLoadMore.classList.remove('is-hidden');\n}\n\nexport function hideLoadMore() {\n  const btnLoadMore = document.querySelector('.loadMore');\n  btnLoadMore.classList.add('is-hidden');\n}","`use strict`;\n\nimport axios from 'axios';\nimport iziToast from \"izitoast\";\n\nconst API_KEY = \"51409693-2d1545100387263aa5c533cc2\";\n\nlet perPage = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios(`https://pixabay.com/api/`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    const { hits, totalHits } = response.data;\n    \n    if (!hits || hits.length === 0) {\n      iziToast.error({\n        message: 'Sorry, no images match your search query. Please try again.',\n        position: 'topRight',\n      });\n      return { images: [], totalHits: 0 };\n    }\n\n    return { images: hits, totalHits };\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n    return { images: [], totalHits: 0 };\n  }\n}\n\n\n\n\n","'use strict';\n\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport {\n  createGallery,\n  clearGallery,\n  hideLoader,\n  showLoader,\n  hideLoadMore,\n  showLoadMore,\n} from './js/render-functions.js';\nimport { getImagesByQuery } from './js/pixabay-api.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst btnLoadMore = document.querySelector('.loadMore');\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalAvailableImages = 0;\nconst perPage = 15;\n\nform.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  currentPage = 1;\n  currentQuery = input.value.trim();\n\n  if (!currentQuery) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const { images, totalHits } = await getImagesByQuery(currentQuery, currentPage);\n\n    if (images.length === 0) return;\n\n    totalAvailableImages = totalHits;\n    createGallery(images);\n    currentPage += 1;\n    showLoadMore();\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function onLoadMore() {\n  showLoader();\n\n  try {\n    const { images } = await getImagesByQuery(currentQuery, currentPage);\n\n    createGallery(images);\n\n    currentPage += 1;\n    showLoadMore();\n  } catch (error) {\n    console.error('Error loading more images:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\n\n\n\n"],"names":["gallery","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMore","hideLoadMore","API_KEY","perPage","getImagesByQuery","query","page","response","axios","hits","totalHits","iziToast","error","form","input","btnLoadMore","currentPage","currentQuery","totalAvailableImages","onFormSubmit","onLoadMore","event"],"mappings":"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"}